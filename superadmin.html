<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Super Admin - Dashboard</title>
<link rel="stylesheet" href="css/styles.css">
<style>
body { font-family: 'Segoe UI', sans-serif; margin:0; background:#f4f6f8; }
header { background:#4e54c8; color:#fff; padding:15px; display:flex; justify-content: space-between; align-items:center; }
header h1 { font-size: 20px; }
header button { padding:8px 12px; border:none; border-radius:5px; cursor:pointer; background:#fff; color:#4e54c8; font-weight:bold; }
main { padding:20px; display:flex; flex-wrap: wrap; gap:20px; }
.card { background:#fff; padding:20px; border-radius:10px; box-shadow:0px 5px 15px rgba(0,0,0,0.1); flex:1 1 300px; min-width:250px; }
.card h2 { font-size:18px; margin-bottom:10px; color:#333; }
.card table { width:100%; border-collapse: collapse; }
.card table th, .card table td { padding:8px; text-align:left; border-bottom:1px solid #ccc; }
</style>
</head>
<body>

<header>
  <h1>Super Admin Dashboard</h1>
  <button onclick="logout()">Cerrar sesión</button>
</header>

<main>
  <div class="card">
    <h2>Usuarios</h2>
    <table id="usuariosTable">
      <tr><th>ID</th><th>Nombre</th><th>Tipo</th><th>Email</th></tr>
      <!-- Datos se llenarán con JS -->
    </table>
  </div>

  <div class="card">
    <h2>Documentos</h2>
    <table id="docsTable">
      <tr><th>ID</th><th>Nombre</th><th>Tipo</th><th>Visitas</th></tr>
    </table>
  </div>
</main>

<script>
// Verificar sesión
const usuario = JSON.parse(localStorage.getItem('usuario'));
if (!usuario || usuario.TipoUsuario !== 'Super Admin') {
    alert("Acceso denegado");
    window.location.href = "index.html";
}

// Función cerrar sesión
function logout() {
    localStorage.removeItem('usuario');
    window.location.href = "index.html";
}

// Función para cargar usuarios desde API
async function cargarUsuarios() {
    try {
        const res = await fetch(`https://script.google.com/macros/s/.../exec?sheet=Personas`);
        const data = await res.json();
        const table = document.getElementById('usuariosTable');
        data.forEach(u => {
            const row = table.insertRow();
            row.insertCell(0).innerText = u.UsuarioID;
            row.insertCell(1).innerText = u.Colaborador;
            row.insertCell(2).innerText = u.TipoUsuario;
            row.insertCell(3).innerText = u.Email;
        });
    } catch(err) {
        console.error(err);
    }
}

// Función para cargar documentos
async function cargarDocumentos() {
    try {
        const res = await fetch(`https://script.google.com/macros/s/.../exec?sheet=Documentos`);
        const data = await res.json();
        const table = document.getElementById('docsTable');
        data.forEach(d => {
            const row = table.insertRow();
            row.insertCell(0).innerText = d.DocumentoID;
            row.insertCell(1).innerText = d.Nombre;
            row.insertCell(2).innerText = d.Tipo;
            row.insertCell(3).innerText = d.VisitasTotales || 0;
        });
    } catch(err) {
        console.error(err);
    }
}

cargarUsuarios();
cargarDocumentos();
</script>

</body>
</html>

