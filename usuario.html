<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Usuario - Documentos</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <h1>Bienvenido Usuario</h1>
  <button onclick="logout()">Cerrar sesi√≥n</button>

  <h2>Documentos Disponibles</h2>
  <table id="tablaDocumentos" border="1">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Tipo</th>
        <th>Link</th>
        <th>QR Online</th>
        <th>Fecha Creado</th>
        <th>Visitas</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h2>Anexos Disponibles</h2>
  <table id="tablaAnexos" border="1">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Tipo</th>
        <th>Link</th>
        <th>QR Online</th>
        <th>Fecha Creado</th>
        <th>Visitas</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script src="js/app.js"></script>
  <script>
    function logout() {
      localStorage.removeItem('usuario');
      window.location.href = "index.html";
    }

    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const documentos = await getItems("documentos");
        const anexos = await getItems("anexos");

        const tbodyDocs = document.getElementById('tablaDocumentos').querySelector('tbody');
        tbodyDocs.innerHTML = "";
        documentos.forEach(doc => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${doc.Nombre}</td>
            <td>${doc.Tipo}</td>
            <td><a href="${doc.Link}" target="_blank">Ver</a></td>
            <td><a href="${doc['QR Online']}" target="_blank">QR</a></td>
            <td>${doc['Fecha Creado']}</td>
            <td>${doc.VisitasTotales}</td>
          `;
          tbodyDocs.appendChild(tr);
        });

        const tbodyAnexos = document.getElementById('tablaAnexos').querySelector('tbody');
        tbodyAnexos.innerHTML = "";
        anexos.forEach(anexo => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${anexo.Nombre}</td>
            <td>${anexo.Tipo}</td>
            <td><a href="${anexo.Link}" target="_blank">Ver</a></td>
            <td><a href="${anexo['QR Online']}" target="_blank">QR</a></td>
            <td>${anexo['Fecha Creado']}</td>
            <td>${anexo.VisitasTotales}</td>
          `;
          tbodyAnexos.appendChild(tr);
        });

      } catch(error) {
        console.error(error);
        alert("Error al cargar documentos o anexos");
      }
    });
  </script>
</body>
</html>


